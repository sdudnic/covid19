(function(t){function e(e){for(var n,i,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/covid19/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"amber"}},[n("div",{staticClass:"d-flex align-center mr-3"},[n("v-img",{staticClass:"shrink mr-2 hidden-md-and-up",attrs:{alt:"Vuetify Logo",contain:"",src:a("cf05"),transition:"scale-transition",height:"5em"}}),n("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:a("cf05"),width:"100"}})],1),n("v-toolbar-title",[t._v("COVID-19")]),n("v-spacer"),t._v(" "+t._s(t.countryName)+" ")],1),n("v-content",[n("Graphs",{attrs:{strings:t.strings,language:t.language,colors:t.colors},on:{countryChanged:function(e){return t.countryChanged(e)}}})],1),n("v-footer",{attrs:{absolute:"",app:""}},[n("v-row",{attrs:{align:"center",justify:"space-between"}},[n("v-card",{staticClass:"mx-2 my-0 px-2 py-0",attrs:{color:"transparent",outlined:""}},[n("small",[t._v(" "+t._s(t.strings.petition.moldovan)+" - "),n("strong",[n("a",{attrs:{href:t.strings.petition.link,target:"blank"}},[t._v(t._s(t.strings.petition.title))])])])]),n("v-card",{staticClass:"mx-2 my-0 px-2 py-0",attrs:{color:"transparent",outlined:""}},[n("small",[t._v(" "+t._s((new Date).getFullYear())+" "),n("a",{attrs:{href:"https://github.com/sdudnic/covid-19",target:"blank"}},[t._v("covid-19")]),t._v(" project by "),n("a",{attrs:{href:"https://github.com/sdudnic",target:"blank"}},[t._v("sdudnic")]),t._v(" & co ")])])],1)],1)],1)},o=[],i=(a("fb6a"),a("d3b7"),a("ac1f"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-autocomplete",{staticClass:"par-5",staticStyle:{"max-width":"250px"},attrs:{dense:"",label:t.strings.chart.country,items:t.countries,"item-text":"name","item-value":"iso3","hide-details":""},model:{value:t.countryCode,callback:function(e){t.countryCode=e},expression:"countryCode"}}),a("v-text-field",{staticClass:"pal-5",staticStyle:{"max-width":"45px"},attrs:{label:t.strings.chart.daysBack,value:t.daysNumber,dense:"",type:"number","hide-details":""}})],1),a("v-row",{staticClass:"ma-2 pa-0",attrs:{align:"center",justify:"center"}},[a("small",[t._v(" "+t._s(t.strings.lastData)+" "),a("span",{staticClass:"font-weight-bold",attrs:{id:"lastApiUpdate"}},[t._v(t._s(t._f("isoDateTime")(t.history.updateDate)))]),t._v(" (+"+t._s(t.strings.today)+") ")])]),a("v-row",{attrs:{align:"center",justify:"center"}},t._l(t.colors,(function(e,n){return a("v-card",{key:n,staticClass:"m-3 p-3 text-center",style:{opacity:0===t.history.new[n]?.5:1},attrs:{shaped:"",color:e}},[a("div",{staticClass:"overline font-weight-bold"},[t._v(t._s(t.strings.chart[n]))]),a("div",{staticClass:"pa-1"},[t._v("+ "+t._s(t.history.new[n])+" ("+t._s(t.history.total[n])+")")])])})),1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-card",{staticClass:"m-10"},[a("GChart",{attrs:{type:"LineChart",settings:{packages:["corechart"],language:t.language},data:t.newData,options:t.newChartOptions}})],1),a("v-card",{staticClass:"m-10"},[a("GChart",{attrs:{type:"LineChart",settings:{packages:["corechart"],language:t.language},data:t.totalData,options:t.totalChartOptions},on:{ready:t.onChartReady}})],1)],1)],1)}),s=[],c=(a("4de4"),a("7db0"),a("b0c0"),a("4fad"),a("07ac"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),l=a("cb43"),d={name:"Graphs",components:{GChart:l["GChart"]},props:{strings:{type:Object,required:!0},language:{type:String,required:!0},colors:{type:Object,required:!0}},data:function(){return{daysNumber:5,countryCode:"mda",history:{total:{confirmed:0,recovered:0,deaths:0},new:{confirmed:0,recovered:0,deaths:0},updateDate:new Date},totalChartOptions:{title:"Total cases",titleTextStyle:{color:"#ffffff80",fontName:"Roboto",fontSize:12,bold:!1,italic:!0,opacity:.5},titlePosition:"out",axisTitlesPosition:"in",fontName:"Roboto",curveType:"function",legend:{position:"none"},chartArea:{left:40,top:30,width:"100%",height:"75%"},height:500,annotations:{stem:{color:"transparent",length:120},textStyle:{color:"red",fontSize:22}},hAxis:{title:"",viewWindowMode:"maximized",format:"dd/MM"},vAxis:{viewWindow:{min:0},format:"short"},colors:Object.values(this.colors),pointSize:5,pointShape:"diamond"},newChartOptions:{},totalData:{},newData:{},countries:[],apiUrl:{timeline:"https://covidapi.info/api/v1/country/***",current:"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/Coronavirus_2019_nCoV_Cases/FeatureServer/2/query?where=UPPER(Country_Region)%20like%20%27%25***%25%27&outFields=Last_Update,Confirmed,Deaths,Recovered,Country_Region&returnGeometry=false&outSR=4326&f=json"},startDateString:""}},methods:{getCountries:function(){var t=this;return fetch("./data/countries.json").then((function(t){return t.json()})).then((function(e){return t.countries=e}))},getApiUrl:function(t,e,a){if(!t)return null;var n="***",r="";if(a)r=this.apiUrl.timeline.replace(n,t);else{if(!e)return null;r=this.apiUrl.current.replace(n,e)}return r},filterFromStartDate:function(t){return t[0]>=this.startDateString},updateFields:function(t){this.history.updateDate=t.date,this.history.total.confirmed=t.confirmed,this.history.total.recovered=t.recovered,this.history.total.deaths=t.deaths},onChartReady:function(t,e){var a=this;a.totalData=new e.visualization.DataTable,a.newData=new e.visualization.DataTable,a.totalData.addColumn("date","Date"),a.totalData.addColumn("number",a.strings.chart.confirmed),a.totalData.addColumn("number",a.strings.chart.recovered),a.totalData.addColumn("number",a.strings.chart.deaths),a.totalData.addColumn({role:"annotation",type:"string"}),a.newData.addColumn("date","Date"),a.newData.addColumn("number",a.strings.chart.confirmed),a.newData.addColumn("number",a.strings.chart.recovered),a.newData.addColumn("number",a.strings.chart.deaths),a.newData.addColumn({role:"annotation",type:"string"});var n=new e.visualization.DateFormat({pattern:"dd/MM/yy hh:mm"});n.format(a.totalData,0),n.format(a.newData,0),a.newChartOptions=JSON.parse(JSON.stringify(a.totalChartOptions)),a.loadData(a.countryCode,a.countryName)},cleanTable:function(t){if(t.getNumberOfRows){var e=t.getNumberOfRows();e&&t.removeRows(0,e)}},addNewDataRow:function(t,e,a){var n=this;n.history.updateDate=t.date,n.history.total.confirmed=t.confirmed,n.history.new.confirmed=t.confirmed-e.confirmed,e.confirmed=t.confirmed,n.history.total.recovered=t.recovered,n.history.new.recovered=t.recovered-e.recovered,e.recovered=t.recovered,n.history.total.deaths=t.deaths,n.history.new.deaths=t.deaths-e.deaths,e.deaths=t.deaths,a||(n.totalData.addRow([t.date,t.confirmed,t.recovered,t.deaths,null]),n.newData.addRow([t.date,n.history.new.confirmed,n.history.new.recovered,n.history.new.deaths,null]))},loadData:function(t,e){var a=this;t=t||a.countryCode,e=e||a.countryName;var n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),o=r.addDays(-a.daysNumber-1);a.startDateString=o.toISOString().slice(0,10),a.totalData.addRow&&(a.totalData.addRow([null,0,0,0,null]),a.newData.addRow([null,0,0,0,null]),a.cleanTable(a.totalData),a.cleanTable(a.newData));var i=a.getApiUrl(t,e,!0),s=a.getApiUrl(t,e,!1),c={date:{},confirmed:0,recovered:0,deaths:0},l={date:{},confirmed:0,recovered:0,deaths:0};fetch(i).then((function(t){return t.json()})).then((function(t){var e=Object.entries(t.result).filter(a.filterFromStartDate);if(0===e.length)a.totalData.addRow([null,0,0,0,"NO DATA"]),a.newData.addRow([null,0,0,0,"NO DATA"]),a.updateFields();else for(var n=0;n<e.length;n++){var r=e[n][1],o=new Date(e[n][0]);l={date:o,confirmed:r.confirmed,recovered:r.recovered,deaths:r.deaths};var i=0==n;a.addNewDataRow(l,c,i)}})).then((function(){fetch(s).then((function(t){return t.json()})).then((function(t){var n=t.features[0].attributes,r=new Date(n.Last_Update);l={date:r,confirmed:n.Confirmed,recovered:n.Recovered,deaths:n.Deaths},a.addNewDataRow(l,c),a.updateFields(l),a.totalChartOptions.title=a.strings.chart.totalTitle+e,a.newChartOptions.title=a.strings.chart.newTitle+e}))})).catch((function(){a.totalData.addRow&&(a.totalData.addRow([null,0,0,0,"NO DATA"]),a.newData.addRow([null,0,0,0,"NO DATA"]),a.updateFields())}))},getIsoCodeFromUrl:function(){var t=this,e=window.location.href,a=new URL(e),n=a.searchParams.get("c")||a.searchParams.get("country");if(!n)return null;n=n.toLowerCase();var r=t.countries.find((function(t){return t.iso3===n}));return r?r.iso3:(r=t.countries.find((function(t){return t.name.toLowerCase()===n})),r?r.iso3:null)},getIso3CodeFromIp:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={ip:"https://ip.nf/me.json",iso3:"https://raw.githubusercontent.com/sdudnic/covid-19/master/countries/iso3.json"},a={headers:{Origin:"*"}},t.next=5,fetch(e.ip,a).then((function(t){return t.json()})).then((function(t){return fetch(e.iso3).then((function(t){return t.json()})).then((function(e){return e[t.ip.country_code]}))}));case 5:return n=t.sent,t.abrupt("return",n);case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),countryCodeChanged:function(t){var e=this.countryName;this.$emit("countryChanged",e),this.loadData(t,e)}},filters:{isoDateTime:function(t){var e="-";return t&&t instanceof Date&&(e=t.toISOString().slice(0,10)+" "+t.toLocaleTimeString()),e}},computed:{countryName:function(){var t=this.countryCode,e=this.countries;if(!t||!e)return"";var a=e.find((function(e){return e.iso3===t.toLowerCase()}));return a&&a.name?a.name:""}},watch:{countryCode:"countryCodeChanged",daysNumber:"loadData"},beforeMount:function(){Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},this.getCountries()},mounted:function(){var t=this;t.totalData&&t.totalData.setColumnLabel&&(t.totalData.setColumnLabel(1,t.strings.chart.confirmed),t.totalData.setColumnLabel(2,t.strings.chart.recovered),t.totalData.setColumnLabel(3,t.strings.chart.deaths),t.newData.setColumnLabel(1,t.strings.chart.confirmed),t.newData.setColumnLabel(2,t.strings.chart.recovered),t.newData.setColumnLabel(3,t.strings.chart.deaths));var e=t.getIsoCodeFromUrl();e?t.countryCode=e:t.getIso3CodeFromIp().then((function(e){e&&(e=e.toLowerCase(),t.countryCode=e)}))}},u=d,h=a("2877"),f=a("6544"),p=a.n(f),m=a("c6a6"),g=a("b0af"),v=a("62ad"),y=a("a523"),w=a("0fd9"),C=a("8654"),b=Object(h["a"])(u,i,s,!1,null,null,null),D=b.exports;p()(b,{VAutocomplete:m["a"],VCard:g["a"],VCol:v["a"],VContainer:y["a"],VRow:w["a"],VTextField:C["a"]});var _={name:"App",components:{Graphs:D},data:function(){return{strings:{chart:{},petition:{}},language:"en",colors:{confirmed:"orange",recovered:"green",deaths:"red"},countryName:""}},beforeMount:function(){this.getStrings()},methods:{getStrings:function(){var t=this,e=navigator.language||navigator.userLanguage;return t.language=e.slice(0,2),fetch("./data/strings.json").then((function(t){return t.json()})).then((function(e){return t.strings=e[t.language]}))},changeTitle:function(t){var e=/(^.*)(COVID-19 evolution graphs,)/,a=t+" $2";document.title=document.title.replace(e,a)},countryChanged:function(t){this.countryName=t,this.changeTitle(t)}}},O=_,j=a("7496"),x=a("40dc"),R=a("a75b"),S=a("553a"),T=a("adda"),N=a("2fa4"),V=a("2a7f"),A=Object(h["a"])(O,r,o,!1,null,null,null),L=A.exports;p()(A,{VApp:j["a"],VAppBar:x["a"],VCard:g["a"],VContent:R["a"],VFooter:S["a"],VImg:T["a"],VRow:w["a"],VSpacer:N["a"],VToolbarTitle:V["a"]});var U=a("f309");n["a"].use(U["a"]);var F=new U["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:F,render:function(t){return t(L)}}).$mount("#app")},cf05:function(t,e,a){t.exports=a.p+"img/logo.35d2f3f9.png"}});
//# sourceMappingURL=app.86586850.js.map