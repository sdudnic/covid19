(function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},o=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/covid19/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"amber",justify:"start"}},[r("div",{staticClass:"align-center"},[r("v-img",{staticClass:"shrink mr-2 hidden-md-and-up",attrs:{alt:"Vuetify Logo",contain:"",src:a("cf05"),transition:"scale-transition",height:"5em"}}),r("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:a("cf05"),width:"100"}})],1),r("v-toolbar-title",{staticClass:"ml-5"},[t._v("covid-19 >")]),r("v-toolbar-title",{staticClass:"ml-1"},[t._v(t._s(t.countryName))])],1),r("v-content",[r("Graphs",{attrs:{strings:t.strings,language:t.language,colors:t.colors},on:{countryChanged:function(e){return t.countryChanged(e)}}})],1),r("v-footer",{attrs:{absolute:"",app:""}},[r("v-row",{attrs:{align:"center",justify:"space-between"}},[r("v-card",{staticClass:"mx-2 my-0 px-2 py-0",attrs:{color:"transparent",outlined:""}},[r("small",[t._v(" "+t._s(t.strings.petition.moldovan)+" - "),r("strong",[r("a",{attrs:{href:t.strings.petition.link,target:"blank"}},[t._v(t._s(t.strings.petition.title))])])])]),r("v-card",{staticClass:"mx-2 my-0 px-2 py-0",attrs:{color:"transparent",outlined:""}},[r("small",[t._v(" "+t._s((new Date).getFullYear())+" "),r("a",{attrs:{href:"https://github.com/sdudnic/covid-19",target:"blank"}},[t._v("covid-19")]),t._v(" project by "),r("a",{attrs:{href:"https://github.com/sdudnic",target:"blank"}},[t._v("sdudnic")]),t._v(" & co ")])])],1)],1)],1)},o=[],i=(a("fb6a"),a("d3b7"),a("ac1f"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-autocomplete",{staticStyle:{"max-width":"250px"},attrs:{dense:"",label:t.strings.chart.country,items:t.countries,"item-text":"name","item-value":"iso3","hide-details":""},model:{value:t.countryCode,callback:function(e){t.countryCode=e},expression:"countryCode"}}),a("v-text-field",{staticClass:"ml-4",staticStyle:{"max-width":"45px"},attrs:{label:t.strings.chart.daysBack,disabled:"",dense:"",type:"number",maxlength:"3","hide-details":""},model:{value:t.daysNumber,callback:function(e){t.daysNumber=e},expression:"daysNumber"}})],1),a("v-row",{staticClass:"ma-2 pa-0",attrs:{align:"center",justify:"center"}},[a("small",[t._v(" "+t._s(t.strings.lastData)+" "),a("span",{staticClass:"font-weight-bold",attrs:{id:"lastApiUpdate"}},[t._v(t._s(t.lastUpdateTime))]),t._v(" (vs "+t._s(t.previousUpdateTime)+") ")])]),a("v-row",{attrs:{align:"center",justify:"center"}},t._l(t.colors,(function(e,r){return a("v-card",{key:r,staticClass:"ma-1 pa-2 text-center",style:{opacity:0===t.cases.delta[r]?.5:1},attrs:{outlined:""}},[a("div",{staticClass:"overline font-weight-bold",style:{color:e}},[t._v(t._s(t.strings.chart[r]))]),a("div",{style:{borderTop:"thin solid rgba(0,0,0,.12)",color:e}},[t._v(" + "+t._s(t.cases.delta[r])+" "),a("small",[t._v("("+t._s(Number(t.cases.total[r]).toLocaleString())+")")])])])})),1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-card",{staticClass:"ma-2 pa-2"},[a("GChart",{attrs:{id:"deltaDataChart",type:"LineChart",settings:{packages:["corechart"],language:t.language},data:t.deltaDataTable,options:t.deltaChartOptions},on:{ready:t.onChartReady}})],1),a("v-card",{staticClass:"ma-2 pa-2"},[a("GChart",{attrs:{id:"totalDataChart",type:"LineChart",settings:{packages:["corechart"],language:t.language},data:t.totalDataTable,options:t.totalChartOptions},on:{ready:t.onChartReady}})],1)],1)],1)}),s=[],c=(a("4de4"),a("7db0"),a("b0c0"),a("4fad"),a("07ac"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),l=a("cb43"),d={name:"Graphs",components:{GChart:l["GChart"]},props:{strings:{type:Object,required:!0},language:{type:String,required:!0},colors:{type:Object,required:!0}},data:function(){return{ready:{totalChart:!1,deltaChart:!1},daysNumber:5,countryCode:"",cases:{total:{confirmed:0,recovered:0,deaths:0},delta:{confirmed:0,recovered:0,deaths:0},updateDate:new Date},totalChartOptions:{title:"Total cases",titleTextStyle:{color:"black",fontName:"Roboto",fontSize:14,bold:!1,italic:!0,opacity:.5},fontName:"Roboto",curveType:"function",legend:{position:"none"},height:500,hAxis:{title:"",viewWindowMode:"maximized",format:"dd/MM"},vAxis:{viewWindow:{min:0},format:"short",titlePosition:"in"},colors:Object.values(this.colors),pointSize:10,pointShape:"diamond",theme:"maximized"},deltaChartOptions:{},current:{},previous:{},totalDataTable:{},deltaDataTable:{},countries:[],apiUrl:{timeline:"https://covidapi.info/api/v1/country/***",current:"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/Coronavirus_2019_nCoV_Cases/FeatureServer/2/query?where=UPPER(Country_Region)%20like%20%27%25***%25%27&outFields=Last_Update,Confirmed,Deaths,Recovered,Country_Region&returnGeometry=false&outSR=4326&f=json"}}},methods:{chartsReady:function(){return this.ready.totalChart&&this.ready.deltaChart},getCountries:function(){var t=this;return fetch("./data/countries.json").then((function(t){return t.json()})).then((function(e){return t.countries=e}))},getApiUrl:function(t,e,a){if(!t)return null;var r="***",n="";if(a)n=this.apiUrl.timeline.replace(r,t);else{if(!e)return null;n=this.apiUrl.current.replace(r,e)}return n},filterFromStartDate:function(t){return t[0]>=this.startDateString},updateFields:function(t,e){t||e?(this.cases.updateDate=(t||e).date,t&&(this.cases.total.confirmed=t.confirmed,this.cases.total.recovered=t.recovered,this.cases.total.deaths=t.deaths),e&&(this.cases.delta.confirmed=e.confirmed,this.cases.delta.recovered=e.recovered,this.cases.delta.deaths=e.deaths)):(this.cases.updateDate=new Date(2e3,1,1),this.cases.total.confirmed=0,this.cases.total.recovered=0,this.cases.total.deaths=0,this.cases.delta.confirmed=0,this.cases.delta.recovered=0,this.cases.delta.deaths=0)},addColumns:function(t){var e=this;t.addColumn("date","Date"),t.addColumn("number",e.strings.chart.confirmed),t.addColumn("number",e.strings.chart.recovered),t.addColumn("number",e.strings.chart.deaths),t.addColumn({role:"annotation",type:"string"})},onChartReady:function(t,e){var a=this,r=t.container.id,n=new e.visualization.DateFormat({pattern:"dd/MM/yy hh:mm"});"deltaDataChart"==r?(a.deltaDataTable=new e.visualization.DataTable,a.addColumns(a.deltaDataTable),n.format(a.deltaDataTable,0),a.ready.deltaChart=!0):"totalDataChart"==r&&(a.totalDataTable=new e.visualization.DataTable,a.addColumns(a.totalDataTable),n.format(a.totalDataTable,0),a.ready.totalChart=!0)},tryReloadData:function(){var t=this;return!!t.readyToLoadData&&(t.loadData(),!0)},cleanTable:function(t){if(t.getNumberOfRows){var e=t.getNumberOfRows();e&&t.removeRows(0,e)}},tableAddRow:function(t,e){e||(e={date:null,confirmed:0,recovered:0,deaths:0}),t.addRow([e.date,e.confirmed,e.recovered,e.deaths,null])},addDataEntry:function(t,e,a){var r=this,n=t,o={date:n.date,confirmed:t.confirmed-e.confirmed,recovered:t.recovered-e.recovered,deaths:t.deaths-e.deaths};return a||(r.tableAddRow(r.totalDataTable,n),r.tableAddRow(r.deltaDataTable,o)),o},loadData:function(){var t=this;t.totalDataTable.addRow&&(t.tableAddRow(t.totalDataTable,null),t.tableAddRow(t.deltaDataTable,null),t.cleanTable(t.totalDataTable),t.cleanTable(t.deltaDataTable)),t.previous={date:{},confirmed:0,recovered:0,deaths:0},t.current={date:{},confirmed:0,recovered:0,deaths:0},fetch(t.timelineApi).then((function(t){return t.json()})).then((function(e){var a=Object.entries(e.result).filter(t.filterFromStartDate);if(0===a.length)t.tableAddRow(t.totalDataTable,null),t.tableAddRow(t.deltaDataTable,null),t.updateFields();else for(var r=0;r<a.length;r++){var n=0==r,o=a[r][1],i=new Date(a[r][0]);t.current={date:i,confirmed:o.confirmed,recovered:o.recovered,deaths:o.deaths},t.addDataEntry(t.current,t.previous,n),t.previous=t.current}})).then((function(){fetch(t.currentApi).then((function(t){return t.json()})).then((function(e){var a=e.features[0].attributes,r=new Date(a.Last_Update);t.current={date:r,confirmed:a.Confirmed,recovered:a.Recovered,deaths:a.Deaths};var n=t.addDataEntry(t.current,t.previous);t.updateFields(t.current,n),t.totalChartOptions.title=t.strings.chart.totalTitle+t.countryName,t.deltaChartOptions.title=t.strings.chart.newTitle+t.countryName}))})).catch((function(){t.totalDataTable.addRow&&(t.tableAddRow(t.totalDataTable,null),t.tableAddRow(t.deltaDataTable,null),t.updateFields())}))},getIsoCodeFromUrl:function(){var t=this,e=window.location.href,a=new URL(e),r=a.searchParams.get("c")||a.searchParams.get("country");if(!r)return null;r=r.toLowerCase();var n=t.countries.find((function(t){return t.iso3===r}));return n?n.iso3:(n=t.countries.find((function(t){return t.name.toLowerCase()===r})),n?n.iso3:null)},getIso3CodeFromIp:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={ip:"https://ip.nf/me.json",iso3:"https://raw.githubusercontent.com/sdudnic/covid-19/master/countries/iso3.json"},a={headers:{Origin:"*"}},t.next=5,fetch(e.ip,a).then((function(t){return t.json()})).then((function(t){return fetch(e.iso3).then((function(t){return t.json()})).then((function(e){return e[t.ip.country_code]}))}));case 5:return r=t.sent,t.abrupt("return",r);case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),countryCodeChanged:function(){var t=this;t.$emit("countryChanged",t.countryName)}},filters:{},computed:{countryName:function(){var t=this.countryCode,e=this.countries;if(!t||!e)return"";var a=e.find((function(e){return e.iso3===t.toLowerCase()}));return a&&a.name?a.name:""},timelineApi:function(){return this.getApiUrl(this.countryCode,this.countryName,!0)},currentApi:function(){return this.getApiUrl(this.countryCode,this.countryName,!1)},readyToLoadData:function(){return this.ready.deltaChart&&this.ready.totalChart&&this.countryCode&&this.daysNumber},startDateString:function(){var t=new Date,e=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())),a=e.addDays(-this.daysNumber-1);return a.toISOString().slice(0,10)},lastUpdateTime:function(){return this.cases.updateDate?this.cases.updateDate.toLocaleString():""},previousUpdateTime:function(){return this.previous.date?this.previous.date.toLocaleString():""}},watch:{countryCode:["countryCodeChanged"],readyToLoadData:{handler:"tryReloadData",deep:!0}},beforeMount:function(){var t=this;Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},t.getCountries(),t.deltaChartOptions=JSON.parse(JSON.stringify(t.totalChartOptions))},mounted:function(){var t=this,e=t.getIsoCodeFromUrl();e?t.countryCode=e:t.getIso3CodeFromIp().then((function(e){e&&(e=e.toLowerCase(),t.countryCode=e)}))}},u=d,h=a("2877"),f=a("6544"),p=a.n(f),m=a("c6a6"),v=a("b0af"),g=a("62ad"),y=a("a523"),b=a("0fd9"),C=a("8654"),w=Object(h["a"])(u,i,s,!1,null,null,null),D=w.exports;p()(w,{VAutocomplete:m["a"],VCard:v["a"],VCol:g["a"],VContainer:y["a"],VRow:b["a"],VTextField:C["a"]});var T={name:"App",components:{Graphs:D},data:function(){return{strings:{chart:{},petition:{}},language:"en",colors:{confirmed:"orange",recovered:"green",deaths:"red"},countryName:""}},beforeMount:function(){this.getStrings()},methods:{getStrings:function(){var t=this,e=navigator.language||navigator.userLanguage;return t.language=e.slice(0,2),fetch("./data/strings.json").then((function(t){return t.json()})).then((function(e){return t.strings=e[t.language]}))},changeTitle:function(t){var e=/(^.*)(COVID-19 evolution graphs,)/,a=t+" $2";document.title=document.title.replace(e,a)},countryChanged:function(t){this.countryName=t,this.changeTitle(t)}}},_=T,j=a("7496"),R=a("40dc"),O=a("a75b"),x=a("553a"),S=a("adda"),A=a("2a7f"),N=Object(h["a"])(_,n,o,!1,null,null,null),U=N.exports;p()(N,{VApp:j["a"],VAppBar:R["a"],VCard:v["a"],VContent:O["a"],VFooter:x["a"],VImg:S["a"],VRow:b["a"],VToolbarTitle:A["a"]});var k=a("f309");r["a"].use(k["a"]);var V=new k["a"]({});r["a"].config.productionTip=!1,new r["a"]({vuetify:V,render:function(t){return t(U)}}).$mount("#app")},cf05:function(t,e,a){t.exports=a.p+"img/logo.35d2f3f9.png"}});
//# sourceMappingURL=app.118bd044.js.map