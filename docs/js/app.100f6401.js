(function(t){function e(e){for(var n,s,i=e[0],c=e[1],l=e[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/covid19/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"amber"}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:a("cf05"),transition:"scale-transition",height:"5em"}}),n("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:a("cf05"),width:"100"}})],1),n("v-toolbar-title",[t._v("COVID-19")]),n("v-spacer")],1),n("v-content",[n("Graphs")],1),n("v-footer",{attrs:{absolute:"",app:""}},[n("v-card-text",{staticClass:"text-right"},[t._v(" "+t._s((new Date).getFullYear())+" "),n("a",{attrs:{href:"https://github.com/sdudnic/covid-19",target:"blank"}},[t._v("covid-19")]),t._v(" project by "),n("a",{attrs:{href:"https://github.com/sdudnic",target:"blank"}},[t._v("sdudnic")]),t._v(" & co "),n("v-spacer")],1)],1)],1)},o=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"4",offset:"4"}},[a("v-autocomplete",{attrs:{items:t.countries,"item-text":"name","item-value":"iso3"},model:{value:t.countryCode,callback:function(e){t.countryCode=e},expression:"countryCode"}}),a("small",[t._v(" "+t._s(t.strings.lastData)+" "),a("span",{attrs:{id:"lastApiUpdate"}},[t._v(t._s(t._f("isoDateTime")(t.last.updateDate)))]),t._v(" (+"+t._s(t.strings.today)+") ")])],1)],1),a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"4"}},[a("span",[a("label",{attrs:{for:"confirmed"}},[t._v(" ⚑ "+t._s(t.strings.chart.confirmed)+" ☛ "+t._s(t.last.total.confirmed)+" (+"+t._s(t.last.new.confirmed)+") ")])])]),a("v-col",{attrs:{cols:"4"}},[a("span",[a("label",{attrs:{for:"recovered"}},[t._v(" ⚑ "+t._s(t.strings.chart.recovered)+" ☛ "+t._s(t.last.total.recovered)+" (+"+t._s(t.last.new.recovered)+") ")])])]),a("v-col",{attrs:{cols:"4"}},[a("span",[a("label",{attrs:{for:"deaths"}},[t._v(" ⚑ "+t._s(t.strings.chart.deaths)+" ☛ "+t._s(t.last.total.deaths)+" (+"+t._s(t.last.new.deaths)+") ")])])])],1),a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"12"}},[a("GChart",{attrs:{type:"LineChart",data:t.newData,options:t.newChartOptions}})],1),a("v-col",{attrs:{cols:"12"}},[a("GChart",{attrs:{type:"LineChart",data:t.totalData,options:t.totalChartOptions},on:{ready:t.onChartReady}})],1)],1)],1)},i=[],c=(a("4de4"),a("7db0"),a("fb6a"),a("b0c0"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),l=a("cb43"),u={name:"Graphs",components:{GChart:l["GChart"]},data:function(){return{strings:{chart:{},petition:{}},language:"en",loading:!0,daysNumber:14,countryCode:"mda",last:{total:{confirmed:0,recovered:0,deaths:0},new:{confirmed:0,recovered:0,deaths:0},updateDate:new Date},totalChartOptions:{title:"Total cases",curveType:"function",legend:{position:"none"},annotations:{stem:{color:"transparent",length:120},textStyle:{color:"red",fontSize:22}},hAxis:{title:"",format:"dd/MM"},vAxis:{viewWindow:{min:0}},colors:["orange","green","red"],pointSize:5,pointShape:"diamond"},newChartOptions:{},totalData:{},newData:{},countries:[],apiUrl:{timeline:"https://covidapi.info/api/v1/country/***",current:"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/Coronavirus_2019_nCoV_Cases/FeatureServer/2/query?where=UPPER(Country_Region)%20like%20%27%25***%25%27&outFields=Last_Update,Confirmed,Deaths,Recovered,Country_Region&returnGeometry=false&outSR=4326&f=json"},startDateString:""}},methods:{getCountries:function(){var t=this;return fetch("./data/countries.json").then((function(t){return t.json()})).then((function(e){return t.countries=e}))},getStrings:function(){var t=this,e=navigator.language||navigator.userLanguage;return this.language=e.slice(0,2),fetch("./data/strings.json").then((function(t){return t.json()})).then((function(e){return t.strings=e[t.language]}))},getApiUrl:function(t,e,a){if(!t)return null;var n="***",r="";if(a)r=this.apiUrl.timeline.replace(n,t);else{if(!e)return null;r=this.apiUrl.current.replace(n,e)}return r},filterFromStartDate:function(t){return t[0]>=this.startDateString},updateFields:function(t,e,a,n){this.last.updateDate=t,this.last.total.confirmed=e,this.last.total.recovered=a,this.last.total.deaths=n},onChartReady:function(t,e){var a=this;a.totalData=new e.visualization.DataTable,a.newData=new e.visualization.DataTable,a.totalData.addColumn("date","Date"),a.totalData.addColumn("number","Confirmed"),a.totalData.addColumn("number","Recovered"),a.totalData.addColumn("number","Deaths"),a.totalData.addColumn({role:"annotation",type:"string"}),a.newData.addColumn("date","Date"),a.newData.addColumn("number","Confirmed"),a.newData.addColumn("number","Recovered"),a.newData.addColumn("number","Deaths"),a.newData.addColumn({role:"annotation",type:"string"});var n=new e.visualization.DateFormat({pattern:"dd/MM/yy hh:mm"});n.format(a.totalData,0),n.format(a.newData,0),a.newChartOptions=JSON.parse(JSON.stringify(a.totalChartOptions)),a.loadData(a.countryCode,a.countryName)},loadData:function(t,e){var a=this;function n(t){var e=t.getNumberOfRows();e>0&&t.removeRows(0,e)}t=t||a.countryCode,e=e||a.countryName,a.totalData.getNumberOfRows&&(n(a.totalData),n(a.newData));var r=a.getApiUrl(t,e,!0),o={confirmed:0,recovered:0,deaths:0};function s(t,e,n,r,s){a.last.updateDate=t,a.last.total.confirmed=e,a.last.new.confirmed=e-o.confirmed,o.confirmed=e,a.last.total.recovered=n,a.last.new.recovered=n-o.recovered,o.recovered=n,a.last.total.deaths=r,a.last.new.deaths=r-o.deaths,o.deaths=r,s||(a.totalData.addRow([t,e,n,r,null]),a.newData.addRow([t,a.last.new.confirmed,a.last.new.recovered,a.last.new.deaths,null]))}fetch(r).then((function(t){return t.json()})).then((function(n){var r=Object.entries(n.result).filter(a.filterFromStartDate);if(0===r.length)a.totalData.addRow([null,0,0,0,"NO DATA"]),a.newData.addRow([null,0,0,0,"NO DATA"]),a.updateFields();else for(var o=0;o<r.length;o++){var i=new Date(r[o][0]),c=r[o][1],l=0==o;s(i,c.confirmed,c.recovered,c.deaths,l)}var u=a.getApiUrl(t,e,!1);fetch(u).then((function(t){return t.json()})).then((function(t){var n=t.features[0].attributes,r=new Date(n.Last_Update);s(r,n.Confirmed,n.Recovered,n.Deaths),a.updateFields(r,n.Confirmed,n.Recovered,n.Deaths),a.totalChartOptions.title=a.strings.chart.totalTitle+e,a.newChartOptions.title=a.strings.chart.newTitle+e}))})).catch((function(){a.totalData.addRow([null,0,0,0,"NO DATA"]),a.newData.addRow([null,0,0,0,"NO DATA"]),a.updateFields()}))},getIsoCodeFromUrl:function(){var t=this,e=window.location.href,a=new URL(e),n=a.searchParams.get("c")||a.searchParams.get("country");if(!n)return null;n=n.toLowerCase();var r=t.countries.find((function(t){return t.iso3===n}));return r?r.iso3:(r=t.countries.find((function(t){return t.name.toLowerCase()===n})),r?r.iso3:null)},changeTitle:function(t){var e=/(^.*)(COVID-19 evolution graphs,)/,a=t+" $2";document.title=document.title.replace(e,a)},getIso3CodeFromIp:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={ip:"https://ip.nf/me.json",iso3:"https://raw.githubusercontent.com/sdudnic/covid-19/master/countries/iso3.json"},a={headers:{Origin:"*"}},t.next=5,fetch(e.ip,a).then((function(t){return t.json()})).then((function(t){return fetch(e.iso3).then((function(t){return t.json()})).then((function(e){return e[t.ip.country_code]}))}));case 5:return n=t.sent,t.abrupt("return",n);case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),countryCodeChanged:function(t){var e=this.countryName;this.loadData(t,e),this.changeTitle(e)}},filters:{isoDateTime:function(t){var e="-";return t&&t instanceof Date&&(e=t.toISOString().slice(0,10)+" "+t.toLocaleTimeString()),e}},computed:{countryName:function(){var t=this.countryCode,e=this.countries;if(!t||!e)return"";var a=e.find((function(e){return e.iso3===t.toLowerCase()}));return a&&a.name?a.name:""}},watch:{countryCode:"countryCodeChanged"},beforeMount:function(){Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},this.getStrings(),this.getCountries()},mounted:function(){var t=this;this.getStrings().then((function(){var e=new Date,a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=a.addDays(-t.daysNumber-1);t.startDateString=n.toISOString().slice(0,10);var r=t.getIsoCodeFromUrl();r?t.countryCode=r:t.getIso3CodeFromIp().then((function(e){e&&(e=e.toLowerCase(),t.countryCode=e)}))}))}},d=u,f=a("2877"),h=a("6544"),p=a.n(h),v=a("c6a6"),m=a("62ad"),g=a("a523"),w=a("0fd9"),C=Object(f["a"])(d,s,i,!1,null,null,null),D=C.exports;p()(C,{VAutocomplete:v["a"],VCol:m["a"],VContainer:g["a"],VRow:w["a"]});var y={name:"App",components:{Graphs:D},data:function(){return{}}},b=y,_=a("7496"),O=a("40dc"),S=a("99d9"),j=a("a75b"),R=a("553a"),T=a("adda"),x=a("2fa4"),A=a("2a7f"),U=Object(f["a"])(b,r,o,!1,null,null,null),V=U.exports;p()(U,{VApp:_["a"],VAppBar:O["a"],VCardText:S["a"],VContent:j["a"],VFooter:R["a"],VImg:T["a"],VSpacer:x["a"],VToolbarTitle:A["a"]});var F=a("f309");n["a"].use(F["a"]);var N=new F["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:N,render:function(t){return t(V)}}).$mount("#app")},cf05:function(t,e,a){t.exports=a.p+"img/logo.35d2f3f9.png"}});
//# sourceMappingURL=app.100f6401.js.map